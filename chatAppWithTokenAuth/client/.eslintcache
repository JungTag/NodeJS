[{"/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/index.js":"1","/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/components/Chat/Chat.js":"2","/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/components/TextContainer/TextContainer.js":"3","/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/components/InfoBar/InfoBar.js":"4","/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/components/Messages/Message/Message.js":"5","/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/components/Messages/Messages.js":"6","/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/api.js":"7"},{"size":160,"mtime":1609376044051,"results":"8","hashOfConfig":"9"},{"size":2196,"mtime":1610083558534,"results":"10","hashOfConfig":"9"},{"size":1006,"mtime":1609567413371,"results":"11","hashOfConfig":"9"},{"size":516,"mtime":1609490818137,"results":"12","hashOfConfig":"9"},{"size":970,"mtime":1610073432839,"results":"13","hashOfConfig":"9"},{"size":390,"mtime":1609550520553,"results":"14","hashOfConfig":"9"},{"size":329,"mtime":1609812787099,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"1n8tyum",{"filePath":"19","messages":"20","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"21","usedDeprecatedRules":"18"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/index.js",[],["32","33"],"/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/components/Chat/Chat.js",["34"],"import React, { useState, useEffect } from \"react\";\nimport queryString from 'query-string';\nimport io from \"socket.io-client\";\nimport cd from 'react-cookies'\n\nimport TextContainer from '../TextContainer/TextContainer';\nimport Messages from '../Messages/Messages';\nimport InfoBar from '../InfoBar/InfoBar';\nimport Input from '../Input/Input';\nimport './Chat.css';\n\n\n\n\nlet socket;\n\nconst Chat = ({ location }) => {\n  const [name, setName] = useState('');\n  const [room, setRoom] = useState('');\n  const [users, setUsers] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n\n  const ENDPOINT = \"localhost:5000\";\n  useEffect(() => {\n    const { name, room } = queryString.parse(location.search);\n\n    socket = io(ENDPOINT, {\n      transports: ['websocket'],\n      path: '/chatSocket',\n    });\n    setRoom(room);\n    setName(name)\n    socket.emit('join', { name, room }, () => {\n    });\n    return () => {\n      // socket.emit('disconnect', () => {\n      //   console.log('end')\n      // });\n      // socket.off()\n      socket.disconnect()\n\n    }\n  }, []\n    //  [ENDPOINT, location.search]\n  );\n  console.log(messages)\n  useEffect(() => {\n    socket.on('message', (message) => {\n      setMessages((messages) => [...messages, message]);\n    });\n    socket.on(\"roomData\", ({ users }) => {\n      setUsers(users);\n    });\n    socket.on('newTokens', ({ accessToken, refreshToken }) => {\n      // cd.remove(\"refreshToken\")\n      cd.save(\"refreshToken\", refreshToken, { maxAge: 60 * 24 });\n      cd.save(\"accessToken\", accessToken, { maxAge: 10 });\n\n    })\n    // const result = api.test(document.cookie)\n  }, []);\n\n  const sendMessage = (event) => {\n    event.preventDefault();\n\n    if (message) {\n      socket.emit('sendMessage', { message, cookies: document.cookie }, () => setMessage(''));\n    }\n  }\n  return (\n    <div className=\"outerContainer\">\n      <div className=\"container\">\n        <InfoBar room={room} />\n        <Messages messages={messages} name={name} />\n        <Input message={message} setMessage={setMessage} sendMessage={sendMessage} />\n\n      </div>\n      <TextContainer users={users} />\n    </div>\n\n  );\n}\n\nexport default Chat;","/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/components/TextContainer/TextContainer.js",[],"/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/components/InfoBar/InfoBar.js",[],"/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/components/Messages/Message/Message.js",[],"/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/components/Messages/Messages.js",[],"/Users/kang/Downloads/kidsfactory/NodeJS/chatAppWithTokenAuth/client/src/api.js",["35"],{"ruleId":"36","replacedBy":"37"},{"ruleId":"38","replacedBy":"39"},{"ruleId":"40","severity":1,"message":"41","line":44,"column":6,"nodeType":"42","endLine":44,"endColumn":8,"suggestions":"43"},{"ruleId":"44","severity":1,"message":"45","line":6,"column":1,"nodeType":"46","endLine":17,"endColumn":2},"no-native-reassign",["47"],"no-negated-in-lhs",["48"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'location.search'. Either include it or remove the dependency array.","ArrayExpression",["49"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","no-global-assign","no-unsafe-negation",{"desc":"50","fix":"51"},"Update the dependencies array to be: [location.search]",{"range":"52","text":"53"},[1105,1107],"[location.search]"]